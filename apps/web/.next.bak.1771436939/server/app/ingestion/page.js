(()=>{var e={};e.id=166,e.ids=[166],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5330:(e,t,i)=>{"use strict";i.r(t),i.d(t,{GlobalError:()=>r.a,__next_app__:()=>u,originalPathname:()=>_,pages:()=>c,routeModule:()=>h,tree:()=>d}),i(6554),i(5133),i(4872);var a=i(1218),s=i(8345),n=i(4380),r=i.n(n),l=i(306),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);i.d(t,o);let d=["",{children:["ingestion",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(i.bind(i,6554)),"/Users/sarathchandrabhatla/Library/Mobile Documents/iCloud~md~obsidian/Documents/Thesis2099/residency-platform/apps/web/src/app/ingestion/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(i.bind(i,5133)),"/Users/sarathchandrabhatla/Library/Mobile Documents/iCloud~md~obsidian/Documents/Thesis2099/residency-platform/apps/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(i.t.bind(i,4872,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/sarathchandrabhatla/Library/Mobile Documents/iCloud~md~obsidian/Documents/Thesis2099/residency-platform/apps/web/src/app/ingestion/page.tsx"],_="/ingestion/page",u={require:i,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/ingestion/page",pathname:"/ingestion",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},1033:(e,t,i)=>{Promise.resolve().then(i.bind(i,4565))},8217:(e,t,i)=>{Promise.resolve().then(i.bind(i,8568))},5581:(e,t,i)=>{Promise.resolve().then(i.t.bind(i,6249,23)),Promise.resolve().then(i.t.bind(i,7445,23)),Promise.resolve().then(i.t.bind(i,5562,23)),Promise.resolve().then(i.t.bind(i,8178,23)),Promise.resolve().then(i.t.bind(i,6322,23)),Promise.resolve().then(i.t.bind(i,1851,23))},8568:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>j});var a=i(4470),s=i(1664),n=i(1044),r=i(4627);let l=[{title:"Demographics",description:"Study basics, patient demographics, addictions"},{title:"Clinical Profile",description:"Symptoms, comorbidities, etiology, AP severity"},{title:"Investigations",description:"Labs, imaging, SVT mapping, vascular findings"},{title:"Management",description:"Treatment, interventions, anticoagulation, outcomes"},{title:"Follow-up & Review",description:"Follow-up status, attachments, final QA"}],o=[{label:"Vomiting",key:"clinical_details__vomiting",durationKey:"clinical_details__vomiting_duration"},{label:"Fever",key:"clinical_details__fever",durationKey:"clinical_details__fever_duration"},{label:"Abdominal Distension",key:"clinical_details__abdominal_distension",durationKey:"clinical_details__abdominal_distension_duration"},{label:"Jaundice",key:"clinical_details__jaundice",durationKey:"clinical_details__jaundice_duration"},{label:"Chest Pain",key:"clinical_details__chest_pain",durationKey:"clinical_details__chest_pain_duration"},{label:"Dyspnoea",key:"clinical_details__dyspnoea",durationKey:"clinical_details__dyspnoea_duration"},{label:"Hematemesis",key:"clinical_details__hematemesis",durationKey:"clinical_details__hematemesis_duration"},{label:"Melena / Haematochezia",key:"clinical_details__melena_haematochezia",durationKey:"clinical_details__melena_haematochezia_duration"},{label:"Ascites",key:"clinical_details__ascites",durationKey:"clinical_details__ascites_duration"},{label:"Splenomegaly",key:"clinical_details__splenomegaly",durationKey:"clinical_details__splenomegaly_duration"}],d=[{label:"DM",key:"comorbidities__dm",durationKey:"comorbidities__dm_duration"},{label:"HTN",key:"comorbidities__htn",durationKey:"comorbidities__htn_duration"},{label:"CAD",key:"comorbidities__cad",durationKey:"comorbidities__cad_duration"},{label:"Obesity",key:"comorbidities__obesity",durationKey:"comorbidities__obesity_duration"},{label:"COPD",key:"comorbidities__copd",durationKey:"comorbidities__copd_duration"},{label:"CLD",key:"comorbidities__cld",durationKey:"comorbidities__cld_duration"},{label:"Thyroid Disorder",key:"comorbidities__thyroid_disorder",durationKey:"comorbidities__thyroid_disorder_duration"},{label:"Known Coagulopathy",key:"comorbidities__known_coagulopathy_disorder",durationKey:"comorbidities__known_coagulopathy_disorder_duration"}],c=[{value:"",label:"--"},{value:"yes",label:"Yes"},{value:"no",label:"No"}],_={template_id:"patient-proforma-v3",patient_id:"",encounter_date:"",diagnosis:"",visit_type:"baseline",svt_status:"without_svt",vessel_involvement:"",ward:"Gastro Surgery Ward",cohort_status:"active",mortality:"no",death_date:"",cause_of_death:"",recanalization_status:"not_applicable",primary_endpoint_complete:!1,notes:"",extra_fields:{}};function u(){return`row_${Date.now()}_${Math.random().toString(36).slice(2,8)}`}function h(){return{id:u(),date:"",parameter:"",value:""}}function p(){return{id:u(),date:"",modality:"",findings:""}}function m(){return{id:u(),date:"",intervention:"",indication:"",remarks:""}}function v(e){return e.replaceAll("__"," - ").replaceAll("_"," ").replace(/\b\w/g,e=>e.toUpperCase())}function g(e,t=""){return"string"==typeof e?e:"number"==typeof e||"boolean"==typeof e?String(e):t}function x(e){if(!e)return[];try{let t=JSON.parse(e);if(Array.isArray(t))return t}catch{}return[]}function j(){let[e,t]=(0,s.useState)("wizard"),[i,j]=(0,s.useState)(_),[f,y]=(0,s.useState)(0),[b,w]=(0,s.useState)("Idle"),[N,C]=(0,s.useState)(!1),[S,k]=(0,s.useState)([]),[D,P]=(0,s.useState)("Idle"),[I,A]=(0,s.useState)(null),[T,$]=(0,s.useState)("Idle"),[z,R]=(0,s.useState)(null),[q,V]=(0,s.useState)([]),[E,M]=(0,s.useState)([h()]),[O,F]=(0,s.useState)([p()]),[L,K]=(0,s.useState)([m()]),[U,W]=(0,s.useState)([]),[B,G]=(0,s.useState)(!1),[H,J]=(0,s.useState)(""),[Q,X]=(0,s.useState)([]),[Y,Z]=(0,s.useState)(!1),[ee,et]=(0,s.useState)(null),[ei,ea]=(0,s.useState)(""),es=(0,s.useMemo)(()=>(function(e,t,i,a){let s=[];return 0!==e||(t.patient_id.trim()||s.push("Study ID is required."),t.encounter_date.trim()||s.push("Assessment date is required."),t.diagnosis.trim()||s.push("Diagnosis is required."),t.ward.trim()||s.push("Ward is required."),t.extra_fields.demographics__age_sex?.trim()||s.push("Demographics: Age / Sex is required."),t.extra_fields.demographics__opd_ipd?.trim()||s.push("Demographics: OPD/IPD is required."),t.extra_fields.demographics__date_of_admission?.trim()||s.push("Demographics: Date of admission is required.")),1!==e||(t.extra_fields.etiology_of_acute_pancreatitis__etiology?.trim()||s.push("Etiology of acute pancreatitis is required."),t.extra_fields.acute_pancreatitis__revised_atlanta_severity_grade?.trim()||s.push("Revised Atlanta severity grade is required.")),2!==e||(i.some(e=>e.date||e.parameter||e.value)||s.push("At least one laboratory investigation entry is required."),a.some(e=>e.date||e.modality||e.findings)||s.push("At least one imaging/endoscopy entry is required."),t.extra_fields.splanchnic_venous_assessment__portal_vein_pv?.trim()||s.push("SVT mapping: Portal vein status is required."),t.extra_fields.splanchnic_venous_assessment__smv?.trim()||s.push("SVT mapping: SMV status is required."),t.extra_fields.splanchnic_venous_assessment__splenic_vein_sv?.trim()||s.push("SVT mapping: Splenic vein status is required.")),3!==e||(t.extra_fields.management__intervention?.trim()||s.push("Management: intervention status is required."),t.extra_fields.outcomes__total_hospital_stay?.trim()||s.push("Outcomes: total hospital stay is required."),"yes"!==t.mortality||(t.death_date.trim()||s.push("Death date is required when mortality is yes."),t.cause_of_death.trim()||s.push("Cause of death is required when mortality is yes."))),4!==e||(t.extra_fields.follow_up__last_follow_up_date?.trim()||s.push("Follow-up: last follow-up date is required."),t.recanalization_status?.trim()||s.push("Recanalization status is required.")),"with_svt"!==t.svt_status||t.vessel_involvement.trim()||s.push("Vessel involvement is required for SVT cases."),s})(f,i,E,O),[f,i,E,O]);function en(e,t){j(i=>({...i,[e]:t}))}function er(e,t){j(i=>({...i,extra_fields:{...i.extra_fields,[e]:t}}))}function el(e){return i.extra_fields[e]||""}function eo(e,t){M(i=>i.map(i=>i.id===e?{...i,...t}:i))}function ed(e,t){F(i=>i.map(i=>i.id===e?{...i,...t}:i))}function ec(e,t){K(i=>i.map(i=>i.id===e?{...i,...t}:i))}function e_(e){W(t=>t.filter(t=>t.id!==e))}async function eu(e){Z(!0),ea("");try{let t=await (0,n.on)(e,150);X(t)}catch(e){ea(e instanceof Error?e.message:"Failed to load cases")}finally{Z(!1)}}async function eh(e){ea("");try{let t=await (0,n.Ov)(e);et(t)}catch(e){ea(e instanceof Error?e.message:"Failed to load case details")}}async function ep(){P("Importing vault proformas..."),A(null);try{let e=await (0,n.Dp)();A(e),P(`Import complete. Scanned ${e.scanned_files}, imported ${e.imported_files}, skipped ${e.skipped_files}.`),await eu(H)}catch(t){let e=t instanceof Error?t.message:"Unknown error";P(`Import failed: ${e}`)}}async function em(e){e.preventDefault(),$("Processing CSV..."),R(null);let t=new FormData(e.currentTarget).get("patient_csv");if(!(t instanceof File)||0===t.size){$("Select a CSV file before submitting.");return}try{let i=await (0,n.os)(t);R(i),$(`CSV processed. Accepted ${i.accepted_rows}/${i.total_rows}, rejected ${i.rejected_rows}.`),e.currentTarget.reset(),await eu(H)}catch(t){let e=t instanceof Error?t.message:"Unknown error";$(`CSV ingestion failed: ${e}`)}}async function ev(){if(es.length>0){w(`Cannot submit yet: ${es[0]}`);return}C(!0),w("Submitting patient record...");try{let e=[];q.length>0&&(w("Uploading attachments..."),e=(await (0,n.c2)(q,i.patient_id||void 0)).files.map(e=>e.stored_path));let t=i.vessel_involvement.split(/[;,]/).map(e=>e.trim().toLowerCase()).filter(e=>e.length>0),a={template_id:i.template_id,patient_id:i.patient_id.trim(),encounter_date:i.encounter_date,diagnosis:i.diagnosis.trim(),visit_type:i.visit_type,svt_status:i.svt_status,vessel_involvement:t,ward:i.ward.trim(),cohort_status:i.cohort_status,mortality:i.mortality,death_date:i.death_date||void 0,cause_of_death:i.cause_of_death||void 0,recanalization_status:i.recanalization_status,primary_endpoint_complete:i.primary_endpoint_complete,notes:i.notes,extra_fields:function(e,t,i,a){let s={...e.extra_fields},n=t.filter(e=>e.date||e.parameter||e.value),r=i.filter(e=>e.date||e.modality||e.findings),l=a.filter(e=>e.date||e.intervention||e.indication||e.remarks);return n.length>0&&(s.investigations__laboratory_entries_json=JSON.stringify(n)),r.length>0&&(s.investigations__imaging_entries_json=JSON.stringify(r)),l.length>0&&(s.management__other_interventions_json=JSON.stringify(l)),s}(i,E,O,L),source_files:e},s=await (0,n.sD)(a);w(`Submission stored. Note created at: ${s.data.note_path}`);let r=i.patient_id.trim().toUpperCase()||"WORKING-DRAFT";e_(r),await eu(H)}catch(t){let e=t instanceof Error?t.message:"Unknown error";w(`Submission failed: ${e}`)}finally{C(!1)}}function eg(e,t,i){return(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{children:e}),(0,a.jsxs)("div",{style:{display:"grid",gap:8,gridTemplateColumns:i?"120px 1fr":"120px"},children:[a.jsx("select",{value:el(t),onChange:e=>er(t,e.target.value),children:c.map(e=>a.jsx("option",{value:e.value,children:e.label},`${t}-${e.value}`))}),i?a.jsx("input",{placeholder:"Duration / Details",value:el(i),onChange:e=>er(i,e.target.value)}):null]})]},t)}return(0,a.jsxs)("section",{className:"page",children:[a.jsx(r.m,{title:"Data Ingestion",description:"Protocol-driven, intuitive multi-step workflow for thesis case logging with autosave drafts, case reopening, and attachments."}),(0,a.jsxs)("div",{className:"ingestion-tabs",children:[a.jsx("button",{className:"wizard"===e?"ingestion-tab ingestion-tab--active":"ingestion-tab",onClick:()=>t("wizard"),children:"Patient Logging Wizard"}),a.jsx("button",{className:"cases"===e?"ingestion-tab ingestion-tab--active":"ingestion-tab",onClick:()=>t("cases"),children:"Case Browser"}),a.jsx("button",{className:"import"===e?"ingestion-tab ingestion-tab--active":"ingestion-tab",onClick:()=>t("import"),children:"Import Existing Proformas"}),a.jsx("button",{className:"csv"===e?"ingestion-tab ingestion-tab--active":"ingestion-tab",onClick:()=>t("csv"),children:"CSV Batch Ingestion"})]}),"wizard"===e?(0,a.jsxs)("div",{className:"wizard-shell",children:[(0,a.jsxs)("div",{className:"draft-strip",children:[(0,a.jsxs)("div",{children:[a.jsx("strong",{children:"Autosave Drafts"}),a.jsx("p",{className:"text-muted",children:"Draft is auto-saved while you type. Load any unfinished case below."})]}),a.jsx("button",{type:"button",onClick:function(){j(_),M([h()]),F([p()]),K([m()]),V([]),y(0),w("New form started.")},children:"Start New Form"})]}),U.length>0?a.jsx("div",{className:"draft-list",children:U.map(e=>(0,a.jsxs)("div",{className:"draft-chip",children:[(0,a.jsxs)("div",{children:[a.jsx("strong",{children:e.label}),(0,a.jsxs)("small",{children:["Saved ",new Date(e.saved_at).toLocaleString()]})]}),(0,a.jsxs)("div",{className:"draft-chip__actions",children:[a.jsx("button",{type:"button",onClick:()=>{j(e.wizard),y(Math.min(Math.max(e.step_index,0),l.length-1)),M(e.lab_rows.length>0?e.lab_rows:[h()]),F(e.imaging_rows.length>0?e.imaging_rows:[p()]),K(e.intervention_rows.length>0?e.intervention_rows:[m()]),V([]),t("wizard"),w(`Loaded draft ${e.label}.`)},children:"Resume"}),a.jsx("button",{type:"button",onClick:()=>e_(e.id),children:"Delete"})]})]},e.id))}):null,a.jsx("ol",{className:"wizard-steps","aria-label":"Ingestion wizard steps",children:l.map((e,t)=>{let i=t===f?"wizard-step wizard-step--active":t<f?"wizard-step wizard-step--done":"wizard-step";return a.jsx("li",{className:i,children:(0,a.jsxs)("button",{type:"button",onClick:()=>y(t),children:[a.jsx("span",{className:"wizard-step__index",children:t+1}),(0,a.jsxs)("span",{children:[a.jsx("strong",{children:e.title}),a.jsx("small",{children:e.description})]})]})},e.title)})}),a.jsx("div",{className:"wizard-panel",children:0===f?(0,a.jsxs)("div",{className:"wizard-content",children:[(0,a.jsxs)("div",{className:"form-card",children:[a.jsx("h3",{children:"Study Basics"}),(0,a.jsxs)("div",{className:"form-grid form-grid--two",children:[(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{children:"Template"}),a.jsx("select",{value:i.template_id,onChange:e=>en("template_id",e.target.value),children:S.map(e=>(0,a.jsxs)("option",{value:e.template_id,children:[e.title," (v",e.version,")"]},e.template_id))})]}),(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{children:"Study ID *"}),a.jsx("input",{value:i.patient_id,onChange:e=>en("patient_id",e.target.value)})]}),(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{children:"Assessment Date *"}),a.jsx("input",{type:"date",value:i.encounter_date,onChange:e=>en("encounter_date",e.target.value)})]}),(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{children:"Visit Type *"}),(0,a.jsxs)("select",{value:i.visit_type,onChange:e=>en("visit_type",e.target.value),children:[a.jsx("option",{value:"baseline",children:"Baseline"}),a.jsx("option",{value:"day7_reassessment",children:"Day 7 Reassessment"}),a.jsx("option",{value:"discharge",children:"Discharge"}),a.jsx("option",{value:"week2_followup",children:"Week 2 Follow-up"}),a.jsx("option",{value:"month1_followup",children:"Month 1 Follow-up"}),a.jsx("option",{value:"month3_followup",children:"Month 3 Follow-up"})]})]}),(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{children:"Diagnosis *"}),a.jsx("input",{value:i.diagnosis,onChange:e=>en("diagnosis",e.target.value)})]}),(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{children:"Ward *"}),a.jsx("input",{value:i.ward,onChange:e=>en("ward",e.target.value)})]}),(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{children:"Cohort Status"}),(0,a.jsxs)("select",{value:i.cohort_status,onChange:e=>en("cohort_status",e.target.value),children:[a.jsx("option",{value:"screened",children:"Screened"}),a.jsx("option",{value:"enrolled",children:"Enrolled"}),a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"completed",children:"Completed"}),a.jsx("option",{value:"terminal_outcome",children:"Terminal Outcome"})]})]}),(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{children:"SVT Status *"}),(0,a.jsxs)("select",{value:i.svt_status,onChange:e=>en("svt_status",e.target.value),children:[a.jsx("option",{value:"without_svt",children:"Without SVT"}),a.jsx("option",{value:"with_svt",children:"With SVT"})]})]}),(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{children:"Vessel Involvement (comma separated)"}),a.jsx("input",{placeholder:"pv, smv, sv, multiple, unknown",value:i.vessel_involvement,onChange:e=>en("vessel_involvement",e.target.value)})]})]})]}),(0,a.jsxs)("div",{className:"form-card",children:[a.jsx("h3",{children:"Demographics"}),a.jsx("div",{className:"form-grid form-grid--two",children:[["demographics__age_sex","Age / Sex *"],["demographics__cr_no","CR Number"],["demographics__contact_no","Contact Number"],["demographics__address","Address"],["demographics__opd_ipd","OPD/IPD *"],["demographics__date_of_admission","Date of Admission *"],["demographics__date_of_discharge","Date of Discharge"],["demographics__weight_height","Weight / Height"],["demographics__bmi","BMI"],["demographics__asa_classification","ASA Classification"]].map(([e,t])=>(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{children:t}),a.jsx("input",{value:el(e),onChange:t=>er(e,t.target.value)})]},e))})]}),(0,a.jsxs)("div",{className:"form-card",children:[a.jsx("h3",{children:"Addictions"}),a.jsx("div",{className:"form-grid form-grid--two",children:[["addictions__alcohol","Alcohol"],["addictions__smoking","Smoking"],["addictions__tobacco_chewing","Tobacco Chewing"],["addictions__others","Others"]].map(([e,t])=>(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{children:t}),a.jsx("input",{value:el(e),onChange:t=>er(e,t.target.value)})]},e))})]})]}):1===f?(0,a.jsxs)("div",{className:"wizard-content",children:[(0,a.jsxs)("div",{className:"form-card",children:[a.jsx("h3",{children:"Pain and Clinical Details"}),a.jsx("div",{className:"form-grid form-grid--two",children:[["clinical_details__index_pain","Index Pain Date"],["clinical_details__current_pain","Current Pain Duration"],["clinical_details__pain_duration","Pain Duration Detail"],["clinical_details__pain_site","Pain Site"],["clinical_details__severity_vas_1_10","VAS Score (1-10)"]].map(([e,t])=>(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{children:t}),a.jsx("input",{value:el(e),onChange:t=>er(e,t.target.value)})]},e))}),a.jsx("div",{className:"form-grid form-grid--two",style:{marginTop:12},children:o.map(e=>eg(e.label,e.key,e.durationKey))})]}),(0,a.jsxs)("div",{className:"form-card",children:[a.jsx("h3",{children:"Comorbidities"}),(0,a.jsxs)("div",{className:"form-grid form-grid--two",children:[d.map(e=>eg(e.label,e.key,e.durationKey)),(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{children:"Other Comorbidities"}),a.jsx("input",{value:el("comorbidities__other"),onChange:e=>er("comorbidities__other",e.target.value)})]})]})]}),(0,a.jsxs)("div",{className:"form-card",children:[a.jsx("h3",{children:"Etiology and AP Severity"}),(0,a.jsxs)("div",{className:"form-grid form-grid--two",children:[(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{children:"Etiology of Acute Pancreatitis *"}),a.jsx("input",{placeholder:"Alcohol / Biliary / Hypertriglyceridemia / Hypercalcemia / Post ERCP / Idiopathic / Other",value:el("etiology_of_acute_pancreatitis__etiology"),onChange:e=>er("etiology_of_acute_pancreatitis__etiology",e.target.value)})]}),(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{children:"Revised Atlanta Severity Grade *"}),(0,a.jsxs)("select",{value:el("acute_pancreatitis__revised_atlanta_severity_grade"),onChange:e=>er("acute_pancreatitis__revised_atlanta_severity_grade",e.target.value),children:[a.jsx("option",{value:"",children:"--"}),a.jsx("option",{value:"mild",children:"Mild"}),a.jsx("option",{value:"moderately_severe",children:"Moderately Severe"}),a.jsx("option",{value:"severe",children:"Severe"})]})]}),(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{children:"Modified CTSI"}),a.jsx("input",{value:el("acute_pancreatitis__modified_ct_severity_score"),onChange:e=>er("acute_pancreatitis__modified_ct_severity_score",e.target.value)})]}),(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{children:"Acute Pancreatitis Type"}),(0,a.jsxs)("select",{value:el("acute_pancreatitis__type"),onChange:e=>er("acute_pancreatitis__type",e.target.value),children:[a.jsx("option",{value:"",children:"--"}),a.jsx("option",{value:"edematous_interstitial",children:"Edematous (Interstitial)"}),a.jsx("option",{value:"necrotizing",children:"Necrotizing"})]})]}),(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{children:"Pancreatic Necrosis"}),a.jsx("input",{placeholder:"yes/no + sterile/infected",value:el("acute_pancreatitis__pancreatic_necrosis"),onChange:e=>er("acute_pancreatitis__pancreatic_necrosis",e.target.value)})]}),(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{children:"GIT Complications"}),a.jsx("input",{placeholder:"Perforation / Obstruction / Fistula / Ischemia / Bleeding / Other",value:el("acute_pancreatitis__git_complications"),onChange:e=>er("acute_pancreatitis__git_complications",e.target.value)})]})]})]})]}):2===f?(0,a.jsxs)("div",{className:"wizard-content",children:[(0,a.jsxs)("div",{className:"form-card",children:[a.jsx("h3",{children:"Laboratory Investigations"}),a.jsx("p",{className:"text-muted",children:"Capture each point as Date + Parameter + Value."}),a.jsx("div",{className:"table-editor",children:E.map(e=>(0,a.jsxs)("div",{className:"table-editor__row",children:[a.jsx("input",{type:"date",value:e.date,onChange:t=>eo(e.id,{date:t.target.value})}),a.jsx("input",{placeholder:"Parameter",value:e.parameter,onChange:t=>eo(e.id,{parameter:t.target.value})}),a.jsx("input",{placeholder:"Value",value:e.value,onChange:t=>eo(e.id,{value:t.target.value})}),a.jsx("button",{type:"button",onClick:()=>M(t=>t.filter(t=>t.id!==e.id)),children:"Remove"})]},e.id))}),a.jsx("button",{type:"button",onClick:()=>M(e=>[...e,h()]),children:"+ Add Lab Entry"})]}),(0,a.jsxs)("div",{className:"form-card",children:[a.jsx("h3",{children:"Imaging / Endoscopy"}),a.jsx("div",{className:"table-editor",children:O.map(e=>(0,a.jsxs)("div",{className:"table-editor__row",children:[a.jsx("input",{type:"date",value:e.date,onChange:t=>ed(e.id,{date:t.target.value})}),a.jsx("input",{placeholder:"Modality",value:e.modality,onChange:t=>ed(e.id,{modality:t.target.value})}),a.jsx("input",{placeholder:"Key findings",value:e.findings,onChange:t=>ed(e.id,{findings:t.target.value})}),a.jsx("button",{type:"button",onClick:()=>F(t=>t.filter(t=>t.id!==e.id)),children:"Remove"})]},e.id))}),a.jsx("button",{type:"button",onClick:()=>F(e=>[...e,p()]),children:"+ Add Imaging Entry"})]}),(0,a.jsxs)("div",{className:"form-card",children:[a.jsx("h3",{children:"SVT and Vascular Mapping"}),a.jsx("div",{className:"form-grid form-grid--two",children:["overall_findings__pancreas","overall_findings__necrosis_location","overall_findings__necrosis_percent","overall_findings__necrosis_site","overall_findings__peripancreatic_fluid_collection","overall_findings__pancreatic_fluid_collection","overall_findings__pseudocyst_won","overall_findings__modified_ctsi","splanchnic_venous_assessment__thrombosis_locations","splanchnic_venous_assessment__time_first_detection_days","splanchnic_venous_assessment__portal_vein_pv","splanchnic_venous_assessment__smv","splanchnic_venous_assessment__splenic_vein_sv","splanchnic_venous_assessment__smv_sv_confluence","portal_hypertensive_changes__splenomegaly","portal_hypertensive_changes__ascites","portal_hypertensive_changes__varices","portal_hypertensive_changes__collaterals","portal_hypertensive_changes__portal_gastropathy","vascular_complications__arterial_pseudoaneurysm","vascular_complications__intra_abdominal_bleeding","vascular_complications__bowel_ischemia","vascular_complications__splenic_infarction"].map(e=>(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{children:v(e)}),a.jsx("input",{value:el(e),onChange:t=>er(e,t.target.value)})]},e))})]})]}):3===f?(0,a.jsxs)("div",{className:"wizard-content",children:[(0,a.jsxs)("div",{className:"form-card",children:[a.jsx("h3",{children:"Management"}),(0,a.jsxs)("div",{className:"form-grid form-grid--two",children:[(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{children:"Conservative Management Components"}),a.jsx("input",{placeholder:"ICU / PN / ionotropes / ventilator / HD / CRRT / other",value:el("management__conservative"),onChange:e=>er("management__conservative",e.target.value)})]}),(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{children:"Intervention Performed *"}),a.jsx("input",{value:el("management__intervention"),onChange:e=>er("management__intervention",e.target.value)})]}),(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{children:"First Intervention"}),a.jsx("input",{value:el("management__first_intervention"),onChange:e=>er("management__first_intervention",e.target.value)})]}),(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{children:"First Intervention Date"}),a.jsx("input",{value:el("management__first_intervention_date"),onChange:e=>er("management__first_intervention_date",e.target.value)})]}),(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{children:"Time to First Intervention (days)"}),a.jsx("input",{value:el("management__time_to_first_intervention_days"),onChange:e=>er("management__time_to_first_intervention_days",e.target.value)})]}),(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{children:"Anticoagulation Therapy"}),a.jsx("input",{placeholder:"yes/no + indication + initial + maintenance + duration",value:el("management__anticoagulation_therapy"),onChange:e=>er("management__anticoagulation_therapy",e.target.value)})]})]})]}),(0,a.jsxs)("div",{className:"form-card",children:[a.jsx("h3",{children:"Other Interventions"}),a.jsx("div",{className:"table-editor",children:L.map(e=>(0,a.jsxs)("div",{className:"table-editor__row table-editor__row--five",children:[a.jsx("input",{type:"date",value:e.date,onChange:t=>ec(e.id,{date:t.target.value})}),a.jsx("input",{placeholder:"Intervention",value:e.intervention,onChange:t=>ec(e.id,{intervention:t.target.value})}),a.jsx("input",{placeholder:"Indication",value:e.indication,onChange:t=>ec(e.id,{indication:t.target.value})}),a.jsx("input",{placeholder:"Remarks",value:e.remarks,onChange:t=>ec(e.id,{remarks:t.target.value})}),a.jsx("button",{type:"button",onClick:()=>K(t=>t.filter(t=>t.id!==e.id)),children:"Remove"})]},e.id))}),a.jsx("button",{type:"button",onClick:()=>K(e=>[...e,m()]),children:"+ Add Intervention"})]}),(0,a.jsxs)("div",{className:"form-card",children:[a.jsx("h3",{children:"Outcomes"}),a.jsx("div",{className:"form-grid form-grid--two",children:["outcomes__icu_stay","outcomes__total_hospital_stay","outcomes__organ_failure","outcomes__bowel_ischemia","outcomes__bleeding","outcomes__variceal_bleeding","outcomes__splenic_infarction","outcomes__bleeding_on_anticoagulation","outcomes__readmission","outcomes__mortality_in_hospital","outcomes__mortality_after_discharge","outcomes__mortality_cause"].map(e=>(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{children:v(e)}),a.jsx("input",{value:el(e),onChange:t=>er(e,t.target.value)})]},e))}),(0,a.jsxs)("div",{className:"form-grid form-grid--two",style:{marginTop:10},children:[(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{children:"Mortality"}),(0,a.jsxs)("select",{value:i.mortality,onChange:e=>en("mortality",e.target.value),children:[a.jsx("option",{value:"no",children:"No"}),a.jsx("option",{value:"yes",children:"Yes"})]})]}),(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{children:"Date of Death"}),a.jsx("input",{type:"date",value:i.death_date,onChange:e=>en("death_date",e.target.value),disabled:"yes"!==i.mortality})]}),(0,a.jsxs)("div",{className:"input-group",style:{gridColumn:"1 / -1"},children:[a.jsx("label",{children:"Cause of Death"}),a.jsx("input",{value:i.cause_of_death,onChange:e=>en("cause_of_death",e.target.value),disabled:"yes"!==i.mortality})]})]})]})]}):(0,a.jsxs)("div",{className:"wizard-content",children:[(0,a.jsxs)("div",{className:"form-card",children:[a.jsx("h3",{children:"Follow-up"}),(0,a.jsxs)("div",{className:"form-grid form-grid--two",children:[["follow_up__svt_assessment_date","follow_up__svt_assessment_interval","follow_up__progression_partial_to_total","follow_up__progression_new_veins","follow_up__progression_segmental_extension","follow_up__recanalization","follow_up__new_onset_thrombosis","follow_up__persistence_of_svt","follow_up__last_follow_up_date","follow_up__duration_since_discharge"].map(e=>(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{children:v(e)}),a.jsx("input",{value:el(e),onChange:t=>er(e,t.target.value)})]},e)),(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{children:"Recanalization Status"}),(0,a.jsxs)("select",{value:i.recanalization_status,onChange:e=>en("recanalization_status",e.target.value),children:[a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"complete",children:"Complete"}),a.jsx("option",{value:"partial",children:"Partial"}),a.jsx("option",{value:"none",children:"None"}),a.jsx("option",{value:"progressed",children:"Progressed"}),a.jsx("option",{value:"not_applicable",children:"Not Applicable"})]})]}),(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{children:"Primary Endpoint Complete"}),(0,a.jsxs)("label",{className:"checkbox-row",children:[a.jsx("input",{type:"checkbox",checked:i.primary_endpoint_complete,onChange:e=>en("primary_endpoint_complete",e.target.checked)}),"Mark complete (typically month 3 follow-up)"]})]})]})]}),(0,a.jsxs)("div",{className:"form-card",children:[a.jsx("h3",{children:"Attachments"}),a.jsx("p",{className:"text-muted",children:"Attach imaging/report files for this patient submission."}),a.jsx("input",{type:"file",multiple:!0,onChange:e=>V(Array.from(e.target.files||[]))}),q.length>0?a.jsx("ul",{children:q.map(e=>a.jsx("li",{children:e.name},`${e.name}-${e.size}`))}):a.jsx("p",{className:"text-muted",children:"No files selected."})]}),(0,a.jsxs)("div",{className:"form-card",children:[a.jsx("h3",{children:"Clinical Notes"}),a.jsx("textarea",{rows:5,value:i.notes,onChange:e=>en("notes",e.target.value),placeholder:"Any other relevant morbidity / complication / treatment notes"})]}),(0,a.jsxs)("div",{className:"form-card",children:[a.jsx("h3",{children:"Review"}),(0,a.jsxs)("div",{className:"review-grid",children:[(0,a.jsxs)("div",{children:[a.jsx("strong",{children:"Study ID"}),a.jsx("p",{children:i.patient_id||"-"})]}),(0,a.jsxs)("div",{children:[a.jsx("strong",{children:"Assessment Date"}),a.jsx("p",{children:i.encounter_date||"-"})]}),(0,a.jsxs)("div",{children:[a.jsx("strong",{children:"Visit Type"}),a.jsx("p",{children:i.visit_type})]}),(0,a.jsxs)("div",{children:[a.jsx("strong",{children:"SVT Status"}),a.jsx("p",{children:i.svt_status})]}),(0,a.jsxs)("div",{children:[a.jsx("strong",{children:"Lab Entries"}),a.jsx("p",{children:E.filter(e=>e.date||e.parameter||e.value).length})]}),(0,a.jsxs)("div",{children:[a.jsx("strong",{children:"Imaging Entries"}),a.jsx("p",{children:O.filter(e=>e.date||e.modality||e.findings).length})]}),(0,a.jsxs)("div",{children:[a.jsx("strong",{children:"Attachments"}),a.jsx("p",{children:q.length})]}),(0,a.jsxs)("div",{children:[a.jsx("strong",{children:"Protocol Fields Captured"}),a.jsx("p",{children:Object.keys(i.extra_fields).length})]})]})]})]})}),es.length>0?(0,a.jsxs)("div",{className:"wizard-error-list",children:[a.jsx("strong",{children:"Complete required fields before moving ahead:"}),a.jsx("ul",{children:es.map(e=>a.jsx("li",{children:e},e))})]}):null,a.jsx("p",{children:b}),(0,a.jsxs)("div",{className:"wizard-actions",children:[a.jsx("button",{type:"button",onClick:function(){y(e=>Math.max(e-1,0))},disabled:0===f||N,children:"Previous"}),f<l.length-1?a.jsx("button",{type:"button",onClick:function(){if(es.length>0){w(`Fix this step first: ${es[0]}`);return}y(e=>Math.min(e+1,l.length-1))},disabled:N||es.length>0,children:"Next Step"}):a.jsx("button",{type:"button",onClick:ev,disabled:N||es.length>0,children:N?"Submitting...":"Submit Patient Case"})]})]}):null,"cases"===e?(0,a.jsxs)("div",{className:"panel",children:[(0,a.jsxs)("div",{className:"panel__header",children:[a.jsx("h2",{children:"Case Browser and Re-open"}),a.jsx("p",{children:"Search existing imported/submitted cases and load them back into the wizard for editing."})]}),(0,a.jsxs)("div",{className:"panel__body panel__body--compact",children:[(0,a.jsxs)("div",{className:"case-search-row",children:[a.jsx("input",{placeholder:"Search by Study ID, diagnosis, ward",value:H,onChange:e=>J(e.target.value)}),a.jsx("button",{type:"button",onClick:()=>eu(H),children:"Search"}),a.jsx("button",{type:"button",onClick:()=>eu(void 0),children:"Reset"})]}),Y?a.jsx("p",{children:"Loading cases..."}):null,ei?a.jsx("p",{className:"wizard-error",children:ei}):null,a.jsx("div",{className:"table-wrap",style:{maxHeight:"50vh"},children:(0,a.jsxs)("table",{className:"data-table",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{children:[a.jsx("th",{children:"Study ID"}),a.jsx("th",{children:"Encounter"}),a.jsx("th",{children:"Visit"}),a.jsx("th",{children:"SVT"}),a.jsx("th",{children:"Diagnosis"}),a.jsx("th",{children:"Events"}),a.jsx("th",{})]})}),a.jsx("tbody",{children:Q.map(e=>(0,a.jsxs)("tr",{children:[a.jsx("td",{children:e.patient_id}),a.jsx("td",{children:e.encounter_date||"-"}),a.jsx("td",{children:e.visit_type}),a.jsx("td",{children:e.svt_status}),a.jsx("td",{children:e.diagnosis||"-"}),a.jsx("td",{children:e.event_count}),a.jsx("td",{children:a.jsx("button",{type:"button",onClick:()=>eh(e.patient_id),children:"Open"})})]},`${e.patient_id}-${e.event_id}`))})]})}),ee?(0,a.jsxs)("div",{className:"case-detail-card",children:[a.jsx("h3",{children:ee.summary.patient_id}),(0,a.jsxs)("p",{className:"text-muted",children:["Latest visit: ",ee.summary.visit_type," | Encounter: ",ee.summary.encounter_date||"-"]}),(0,a.jsxs)("div",{className:"review-grid",children:[(0,a.jsxs)("div",{children:[a.jsx("strong",{children:"Diagnosis"}),a.jsx("p",{children:ee.summary.diagnosis||"-"})]}),(0,a.jsxs)("div",{children:[a.jsx("strong",{children:"Ward"}),a.jsx("p",{children:ee.summary.ward||"-"})]}),(0,a.jsxs)("div",{children:[a.jsx("strong",{children:"Cohort"}),a.jsx("p",{children:ee.summary.cohort_status})]}),(0,a.jsxs)("div",{children:[a.jsx("strong",{children:"History Rows"}),a.jsx("p",{children:ee.history.length})]})]}),a.jsx("button",{type:"button",onClick:()=>(function(e){let i=e.payload||{},{extra:a,labRows:s,imagingRows:n,interventionRows:r}=function(e){let t=e.extra_fields,i={};if(t&&"object"==typeof t)for(let[e,a]of Object.entries(t)){let t=e.trim();if(!t)continue;let s=g(a).trim();s&&(i[t]=s)}let a=x(i.investigations__laboratory_entries_json),s=x(i.investigations__imaging_entries_json),n=x(i.management__other_interventions_json);return delete i.investigations__laboratory_entries_json,delete i.investigations__imaging_entries_json,delete i.management__other_interventions_json,{extra:i,labRows:a.length>0?a.map(e=>({...e,id:e.id||u()})):[h()],imagingRows:s.length>0?s.map(e=>({...e,id:e.id||u()})):[p()],interventionRows:n.length>0?n.map(e=>({...e,id:e.id||u()})):[m()]}}(i),l=i.vessel_involvement,o=Array.isArray(l)?l.map(e=>g(e).trim()).filter(Boolean).join(", "):g(l);j({template_id:g(i.template_id,"patient-proforma-v3")||"patient-proforma-v3",patient_id:g(i.patient_id),encounter_date:g(i.encounter_date),diagnosis:g(i.diagnosis),visit_type:g(i.visit_type,"baseline")||"baseline",svt_status:g(i.svt_status,"without_svt")||"without_svt",vessel_involvement:o,ward:g(i.ward,"Gastro Surgery Ward"),cohort_status:g(i.cohort_status,"active")||"active",mortality:g(i.mortality,"no")||"no",death_date:g(i.death_date),cause_of_death:g(i.cause_of_death),recanalization_status:g(i.recanalization_status,"not_applicable")||"not_applicable",primary_endpoint_complete:function(e,t=!1){if("boolean"==typeof e)return e;if("string"==typeof e){let t=e.trim().toLowerCase();if(["true","1","yes","y"].includes(t))return!0;if(["false","0","no","n"].includes(t))return!1}return t}(i.primary_endpoint_complete,!1),notes:g(i.notes),extra_fields:a}),M(s),F(n),K(r),V([]),t("wizard"),y(0),w(`Loaded case ${e.summary.patient_id}. Submitting will create a new revision event.`)})(ee),children:"Load Into Wizard (Create New Revision)"})]}):null]})]}):null,"import"===e?(0,a.jsxs)("div",{className:"panel",children:[(0,a.jsxs)("div",{className:"panel__header",children:[a.jsx("h2",{children:"Backfill Existing Vault Proformas"}),a.jsx("p",{children:"Import all historical patient proforma markdown files into the analytics event stream."})]}),(0,a.jsxs)("div",{className:"panel__body panel__body--compact",children:[a.jsx("button",{type:"button",onClick:ep,style:{width:"fit-content",padding:"8px 14px"},children:"Import Existing Vault Proformas"}),a.jsx("p",{children:D}),I?(0,a.jsxs)("div",{className:"review-grid",children:[(0,a.jsxs)("div",{children:[a.jsx("strong",{children:"Scanned"}),a.jsx("p",{children:I.scanned_files})]}),(0,a.jsxs)("div",{children:[a.jsx("strong",{children:"Imported"}),a.jsx("p",{children:I.imported_files})]}),(0,a.jsxs)("div",{children:[a.jsx("strong",{children:"Skipped"}),a.jsx("p",{children:I.skipped_files})]}),(0,a.jsxs)("div",{children:[a.jsx("strong",{children:"Errors"}),a.jsx("p",{children:I.errors.length})]})]}):null,I&&I.errors.length>0?(0,a.jsxs)("div",{children:[a.jsx("strong",{children:"Import Issues"}),a.jsx("ul",{children:I.errors.slice(0,15).map(e=>(0,a.jsxs)("li",{children:[e.file_path,": ",e.message]},`${e.file_path}-${e.message}`))})]}):null]})]}):null,"csv"===e?(0,a.jsxs)("div",{className:"panel",children:[(0,a.jsxs)("div",{className:"panel__header",children:[a.jsx("h2",{children:"CSV Batch Ingestion"}),a.jsx("p",{children:"Use this for bulk updates. Additional columns are preserved automatically."})]}),(0,a.jsxs)("div",{className:"panel__body panel__body--compact",children:[(0,a.jsxs)("form",{onSubmit:em,style:{display:"grid",gap:10,maxWidth:560},children:[(0,a.jsxs)("label",{children:["CSV File",a.jsx("input",{name:"patient_csv",type:"file",accept:".csv,text/csv",required:!0,style:{width:"100%"}})]}),a.jsx("button",{type:"submit",style:{width:"fit-content",padding:"8px 14px"},children:"Process CSV"})]}),a.jsx("p",{children:T}),z&&z.errors.length>0?(0,a.jsxs)("div",{children:[a.jsx("strong",{children:"CSV Errors"}),a.jsx("ul",{children:z.errors.slice(0,12).map((e,t)=>(0,a.jsxs)("li",{children:["Row ",e.row_number,": ",e.message]},`${e.row_number}-${t}`))})]}):null]})]}):null]})}},4565:(e,t,i)=>{"use strict";i.d(t,{Sidebar:()=>o});var a=i(4470),s=i(2443),n=i(3624),r=i(1664);i(1044);let l=[{href:"/dashboard",label:"Dashboard"},{href:"/cohort",label:"Cohort Ops"},{href:"/followups",label:"Follow-ups"},{href:"/data-quality",label:"Data Quality"},{href:"/patients",label:"Patients"},{href:"/vault",label:"Vault"},{href:"/ingestion",label:"Ingestion"}];function o(){let e=(0,n.usePathname)(),[t,i]=(0,r.useState)([]),[o,d]=(0,r.useState)("Connecting..."),c="Live"===o?"live":"Reconnecting..."===o?"warning":"Initial load failed"===o?"danger":"info";return(0,a.jsxs)("aside",{className:"sidebar",children:[(0,a.jsxs)("header",{className:"sidebar__brand",children:[a.jsx("h1",{className:"sidebar__title",children:"Thesis Vault"}),a.jsx("p",{className:"sidebar__subtitle",children:"Residency operations workspace"})]}),a.jsx("nav",{className:"sidebar__nav",children:l.map(t=>{let i=e===t.href;return a.jsx(s.default,{href:t.href,"aria-current":i?"page":void 0,className:`sidebar__link${i?" sidebar__link--active":""}`,children:t.label},t.href)})}),(0,a.jsxs)("section",{className:"sidebar__section",children:[(0,a.jsxs)("div",{className:"sidebar__section-header",children:[a.jsx("h2",{className:"sidebar__section-title",children:"Vault Folders"}),a.jsx("span",{className:`sidebar__status sidebar__status--${c}`,children:o})]}),(0,a.jsxs)("div",{className:"sidebar__folder-list",children:[t.map(e=>a.jsx(s.default,{href:`/vault?folder=${encodeURIComponent(e)}`,className:"sidebar__folder-link",children:e},e)),0===t.length?a.jsx("p",{className:"sidebar__empty",children:"No folders indexed yet."}):null]})]})]})}},4627:(e,t,i)=>{"use strict";i.d(t,{m:()=>s});var a=i(4470);function s({title:e,description:t,actions:i}){return(0,a.jsxs)("header",{className:"page-header",children:[a.jsx("h1",{className:"page-title",children:e}),a.jsx("p",{className:"page-subtitle",children:t}),i?a.jsx("div",{children:i}):null]})}},1044:(e,t,i)=>{"use strict";i.d(t,{Dp:()=>d,G:()=>h,Ov:()=>_,WV:()=>u,c2:()=>l,on:()=>c,os:()=>o,sD:()=>r});let a=process.env.NEXT_PUBLIC_API_BASE_URL||"http://127.0.0.1:8000";async function s(e){let t=await fetch(`${a}${e}`,{cache:"no-store"});if(!t.ok)throw Error(`Request failed: ${t.status}`);return(await t.json()).data}async function n(e,t){let i=await fetch(`${a}${e}`,{method:"POST",body:t});if(!i.ok)throw Error(await i.text()||`Request failed: ${i.status}`);return(await i.json()).data}async function r(e){let t=await fetch(`${a}/ingestion/patient`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error(await t.text()||"Failed to submit patient data");return await t.json()}async function l(e,t){let i=new FormData;for(let t of e)i.append("files",t);return t&&i.append("patient_id",t),n("/ingestion/files",i)}async function o(e){let t=new FormData;return t.append("file",e),n("/ingestion/patient-csv",t)}async function d(){let e=await fetch(`${a}/ingestion/import-proformas`,{method:"POST"});if(!e.ok)throw Error(await e.text()||"Failed to import proformas");return(await e.json()).data}function c(e,t=100){let i=new URLSearchParams;return i.set("limit",String(t)),e&&e.trim()&&i.set("q",e.trim()),s(`/ingestion/cases?${i.toString()}`)}function _(e){return s(`/ingestion/cases/${encodeURIComponent(e)}`)}async function u(e=!0,t,i){let s=new URLSearchParams;s.set("force",String(e)),t&&s.set("patient_key",t),i&&s.set("file_id",i);let n=await fetch(`${a}/patients/index/reindex?${s.toString()}`,{method:"POST"});if(!n.ok)throw Error(await n.text()||`Request failed: ${n.status}`);return(await n.json()).data}function h(e,t){return`${a}/patients/${encodeURIComponent(e)}/files/${encodeURIComponent(t)}`}},6554:(e,t,i)=>{"use strict";i.r(t),i.d(t,{$$typeof:()=>r,__esModule:()=>n,default:()=>l});var a=i(4259);let s=(0,a.createProxy)(String.raw`/Users/sarathchandrabhatla/Library/Mobile Documents/iCloud~md~obsidian/Documents/Thesis2099/residency-platform/apps/web/src/app/ingestion/page.tsx`),{__esModule:n,$$typeof:r}=s;s.default;let l=(0,a.createProxy)(String.raw`/Users/sarathchandrabhatla/Library/Mobile Documents/iCloud~md~obsidian/Documents/Thesis2099/residency-platform/apps/web/src/app/ingestion/page.tsx#default`)},5133:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>_,metadata:()=>c});var a=i(8529);i(1835);var s=i(4259);let n=(0,s.createProxy)(String.raw`/Users/sarathchandrabhatla/Library/Mobile Documents/iCloud~md~obsidian/Documents/Thesis2099/residency-platform/apps/web/src/components/layout/Sidebar.tsx`),{__esModule:r,$$typeof:l}=n;n.default;let o=(0,s.createProxy)(String.raw`/Users/sarathchandrabhatla/Library/Mobile Documents/iCloud~md~obsidian/Documents/Thesis2099/residency-platform/apps/web/src/components/layout/Sidebar.tsx#Sidebar`);function d({children:e}){return(0,a.jsxs)("div",{className:"app-shell",children:[a.jsx(o,{}),a.jsx("main",{className:"app-shell__main",children:a.jsx("div",{className:"app-shell__content",children:e})})]})}let c={title:"Thesis Residency Platform",description:"Vault navigation, ingestion, and live analytics"};function _({children:e}){return a.jsx("html",{lang:"en",children:a.jsx("body",{children:a.jsx(d,{children:e})})})}},1835:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),a=t.X(0,[553],()=>i(5330));module.exports=a})();