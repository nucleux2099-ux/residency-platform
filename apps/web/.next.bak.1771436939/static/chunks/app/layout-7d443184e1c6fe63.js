(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{7949:function(t,e,n){Promise.resolve().then(n.t.bind(n,1461,23)),Promise.resolve().then(n.bind(n,9823))},9823:function(t,e,n){"use strict";n.d(e,{Sidebar:function(){return l}});var a=n(1514),i=n(9170),r=n(3939),o=n(7993),s=n(8378);let c=[{href:"/dashboard",label:"Dashboard"},{href:"/cohort",label:"Cohort Ops"},{href:"/followups",label:"Follow-ups"},{href:"/data-quality",label:"Data Quality"},{href:"/patients",label:"Patients"},{href:"/vault",label:"Vault"},{href:"/ingestion",label:"Ingestion"}];function l(){let t=(0,r.usePathname)(),[e,n]=(0,o.useState)([]),[l,u]=(0,o.useState)("Connecting...");(0,o.useEffect)(()=>{let t=!0;(0,s.iX)().then(e=>{t&&(n(e),u("Live"))}).catch(()=>{t&&u("Initial load failed")});let e=(0,s.Zj)(e=>{t&&(n(e.folders),u("Live"))},()=>{t&&u("Reconnecting...")});return()=>{t=!1,e.close()}},[]);let d="Live"===l?"live":"Reconnecting..."===l?"warning":"Initial load failed"===l?"danger":"info";return(0,a.jsxs)("aside",{className:"sidebar",children:[(0,a.jsxs)("header",{className:"sidebar__brand",children:[(0,a.jsx)("h1",{className:"sidebar__title",children:"Thesis Vault"}),(0,a.jsx)("p",{className:"sidebar__subtitle",children:"Residency operations workspace"})]}),(0,a.jsx)("nav",{className:"sidebar__nav",children:c.map(e=>{let n=t===e.href;return(0,a.jsx)(i.default,{href:e.href,"aria-current":n?"page":void 0,className:"sidebar__link".concat(n?" sidebar__link--active":""),children:e.label},e.href)})}),(0,a.jsxs)("section",{className:"sidebar__section",children:[(0,a.jsxs)("div",{className:"sidebar__section-header",children:[(0,a.jsx)("h2",{className:"sidebar__section-title",children:"Vault Folders"}),(0,a.jsx)("span",{className:"sidebar__status sidebar__status--".concat(d),children:l})]}),(0,a.jsxs)("div",{className:"sidebar__folder-list",children:[e.map(t=>(0,a.jsx)(i.default,{href:"/vault?folder=".concat(encodeURIComponent(t)),className:"sidebar__folder-link",children:t},t)),0===e.length?(0,a.jsx)("p",{className:"sidebar__empty",children:"No folders indexed yet."}):null]})]})]})}},8378:function(t,e,n){"use strict";n.d(e,{B:function(){return g},Dp:function(){return f},G:function(){return S},Ov:function(){return p},Vt:function(){return b},WV:function(){return x},XT:function(){return v},Zj:function(){return c},c2:function(){return u},fP:function(){return m},iX:function(){return o},kK:function(){return _},on:function(){return h},os:function(){return d},pK:function(){return s},sD:function(){return l},xQ:function(){return w}});let a=n(3069).env.NEXT_PUBLIC_API_BASE_URL||"http://127.0.0.1:8000";async function i(t){let e=await fetch("".concat(a).concat(t),{cache:"no-store"});if(!e.ok)throw Error("Request failed: ".concat(e.status));return(await e.json()).data}async function r(t,e){let n=await fetch("".concat(a).concat(t),{method:"POST",body:e});if(!n.ok)throw Error(await n.text()||"Request failed: ".concat(n.status));return(await n.json()).data}function o(){return i("/vault/folders")}function s(){return i("/templates")}function c(t,e){let n=new EventSource("".concat(a,"/vault/stream"));return n.addEventListener("vault_tree",e=>{t(JSON.parse(e.data))}),e&&(n.onerror=()=>e()),n}async function l(t){let e=await fetch("".concat(a,"/ingestion/patient"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw Error(await e.text()||"Failed to submit patient data");return await e.json()}async function u(t,e){let n=new FormData;for(let e of t)n.append("files",e);return e&&n.append("patient_id",e),r("/ingestion/files",n)}async function d(t){let e=new FormData;return e.append("file",t),r("/ingestion/patient-csv",e)}async function f(){let t=await fetch("".concat(a,"/ingestion/import-proformas"),{method:"POST"});if(!t.ok)throw Error(await t.text()||"Failed to import proformas");return(await t.json()).data}function h(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=new URLSearchParams;return n.set("limit",String(e)),t&&t.trim()&&n.set("q",t.trim()),i("/ingestion/cases?".concat(n.toString()))}function p(t){return i("/ingestion/cases/".concat(encodeURIComponent(t)))}function m(t,e,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:200,r=new URLSearchParams;return r.set("limit",String(a)),t&&t.trim()&&r.set("q",t.trim()),e&&r.set("svt_status",e),n&&r.set("case_bucket",n),i("/patients?".concat(r.toString()))}function _(t){return i("/patients/".concat(encodeURIComponent(t)))}function b(t,e){return i("/patients/".concat(encodeURIComponent(t),"/files/").concat(encodeURIComponent(e),"/preview"))}function w(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12e4;return i("/patients/".concat(encodeURIComponent(t),"/files/").concat(encodeURIComponent(e),"/extracted?max_chars=").concat(n))}function v(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,a=new URLSearchParams;return a.set("q",t),a.set("limit",String(n)),e&&a.set("patient_key",e),i("/patients/search?".concat(a.toString()))}function g(){return i("/patients/index/status")}async function x(){let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0],e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=new URLSearchParams;i.set("force",String(t)),e&&i.set("patient_key",e),n&&i.set("file_id",n);let r=await fetch("".concat(a,"/patients/index/reindex?").concat(i.toString()),{method:"POST"});if(!r.ok)throw Error(await r.text()||"Request failed: ".concat(r.status));return(await r.json()).data}function S(t,e){return"".concat(a,"/patients/").concat(encodeURIComponent(t),"/files/").concat(encodeURIComponent(e))}},1461:function(){}},function(t){t.O(0,[29,97,869,753,744],function(){return t(t.s=7949)}),_N_E=t.O()}]);